// # Sidebar styles
// ====================

.sidebar {
  display: flex;
  flex-direction: column;
  width: $sidebar-width;
  transition: width .3s;

  > .menu {
    flex: 1;

    > .list {
      list-style: none;
      margin: 0;
      padding: 0;

      > .title {
        padding: .25rem .75rem;
        color: darken($menu-item-color, 40%);
        font-size: .75rem;
        text-shadow: 0 0 .125rem $menu-item-hover-background;
      }

      > .divider::before {
        display: block;
        height: .625rem;
        // background-color: darken($menu-item-hover-background, 1%);
        // box-shadow: inset 1px 1px 1px darken($menu-item-hover-background, 6%);
        content: '';
      }

      > .item {
        position: relative;

        > a {
          display: block;
          color: $menu-item-color;
          font-size: .875rem;
          line-height: $sidebar-item-height;
          white-space: nowrap;
          overflow: hidden;

          > i,
          &::before {
            padding: 0 ($sidebar-min-width - 1rem) / 2;
            font-size: 1rem;
          }
        }

        > .list {
          display: none;
          list-style: none;
          padding: .75rem;

          > .divider::before {
            display: block;
            height: .0625rem;
            margin: .125rem;
            background: $menu-border-background;
            content: '';
          }

          > .item {
            > a {
              display: block;
              padding: .125rem;
              font-size: .8125rem;
              color: $menu-item-color;
              white-space: nowrap;
              overflow: hidden;
            }

            &.active a {
              color: $menu-item-hover-color;
            }

            &:hover a {
              // color: $menu-item-hover-color;
              color: lighten($menu-item-hover-color, 20%);
            }
          }
        }

        &:hover {
          > a {
            background: $menu-item-hover-background;
            color: $menu-item-hover-color;
          }

          > .list {
            display: block;
            position: absolute;
            right: -$sidebar-sub-width;
            top: 0;
            min-width: $sidebar-sub-width;
            background: $menu-item-hover-background;
            box-sizing: border-box;

            // // right bubble
            // right: -$sidebar-sub-width + .25rem;
            // border-radius: $border-radius;
            // z-index: 1;

            // Sidebar hover arrow
            background: darken($menu-item-hover-background, 3%);
            &::before {
              display: inline-block;
              position: absolute;
              top: 0;
              left: -.875rem;
              margin: ($sidebar-item-height - .875rem) / 2 0;
              border: (.875rem / 2) solid transparent;
              border-right-color: darken($menu-item-hover-background, 3%);
              content: '';
            }
          }
        }

        &.active {
          > a {
            color: $menu-item-active-color;
            background: $menu-item-active-background;

            // Sidebar active arrow
            &::after {
              display: inline-block;
              position: absolute;
              right: 0;
              margin: ($sidebar-item-height - .875rem) / 2 0;
              border: (.875rem / 2) solid transparent;
              border-right-color: $content-background;
              content: '';
            }
          }

          > .list {
            display: block;
            position: static;
            width: auto;
            background: lighten($menu-item-hover-background, 5%);

            > .divider::before {
              background: lighten($menu-item-hover-background, 3%);
            }
          }
        }
      }
    }
  }

  > .footer {
    width: $sidebar-width;
    border-top: .0625rem solid $menu-border-background;
    line-height: 2rem;
    font-size: .75rem;

    > .toggle {
      display: inline-block;
      width: $sidebar-min-width;
      border-right: .0625rem solid $menu-border-background;
      color: darken($menu-item-color, 20%);
      font-size: .875rem;
      text-align: center;
      transition: transform .3s;

      &:hover {
        color: $menu-item-color;
      }
    }

    > .copyright {
      display: inline-block;
      padding-left: .5rem;
      color: darken($menu-item-color, 20%);

      &:hover {
        color: $menu-item-color;
      }
    }
  }
}

@mixin collapse {
  width: $sidebar-min-width;

  .title {
    display: none;
  }

  .menu {
    margin-top: .625rem;

    > .list > .item {
      &:not(:hover) > .list {
        display: none;
      }

      &.active {
        // // mini sidebar active arrow
        // > a::after {
        //   display: none;
        // }

        > .list {
          position: absolute;
          background: $menu-item-hover-background;
        }
      }
    }
  }

  .toggle {
    transform: rotate(180deg);
  }
}

.sidebar.collapse {
  @include collapse;
}

@media screen and (max-width: 768px) {
  .sidebar {
    @include collapse;
  }
}
